<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>Creation Task Instances</title>
        <meta charset="UTF-8">
        <!-- <meta name="viewport" content="width=device-width"> -->
        <script type="text/javascript" src="question-properties.js"></script>
        <script type="text/javascript" src="taskinstances.js"></script>
        <script type="text/javascript" src="utils.js"></script>
        <script type="text/javascript" src="setup.js"></script>
        <script type="text/javascript" src="addviewers.js"></script>
        <script src="jquery-1.10.2.js"></script>

        <link rel="stylesheet" href="//code.jquery.com/ui/1.11.2/themes/smoothness/jquery-ui.css"> 
        <script src="//code.jquery.com/jquery-1.10.2.js"></script>
        <script src="//code.jquery.com/ui/1.11.2/jquery-ui.js"></script>

        <style type="text/css" >
            #controlBox{
                padding: 10px 50px;
                margin-left: 20px;
                //padding-left: 20px;
                width:760px;
            }
            .right{                
                float:right;
            }
            .innerBox{                
                padding-left: 20px;
            }
            .miniHeader{
                padding-left: 20px;
                font-style: italic;
            }
            .center{
                margin-left: 150px;
                margin-right: 150px;
            }
            .questionNumberEven, .conditionNumberEven{
                background-color: #E8E8E8 ;
                margin: 1px;
                padding: 1px;
            }
            .questionNumberOdd, .conditionNumberOdd{
                background-color: #F0F0F0  ;
                margin: 1px;
                padding: 1px;
            }
             .refreshIconSmall{
                margin-left: 10px;
                margin-right: 10px;
                width: 20px;
                height: 15px;
            }
        </style>
        <script type="text/javascript">

            window.onload = function() {
                //we will try and get the respective name for this current study
                var div = document.getElementById("qnDiv");
               // loadTasks(div, "Task Type");
                
                loadTasks(div, "label", "1", "taskType");
                
            
                loadDatasets("1");
                getExistingDirectoryNamesAndHTMLFilenames();

                getNewTempName();

            };

            //function to get the new temp name
            function getNewTempName() {

                var command = "getTempName";
                var url = "TaskInstancesCreator?command=" + command;
                var xmlHttpRequest = getXMLHttpRequest();
                xmlHttpRequest.onreadystatechange = function()
                {
                    if (xmlHttpRequest.readyState === 4 && xmlHttpRequest.status === 200)
                    {
                        document.getElementById("tempname").value = xmlHttpRequest.responseText;
                    }
                };
                xmlHttpRequest.open("GET", url, true);
                xmlHttpRequest.send();
            }

        </script>
    </head>
    <body>
        <div id="controlBox">
            <h2> Create Task Instances </h2>
            <form>
                <hr>
                <!--
                <h4> Supporting Files </h4>
                <div class="innerBox">
                    <p> Load Supporting Files &nbsp; &nbsp; &nbsp;
                        <input type="file" name="thefiles[]" id="thefiles" onchange="getUploadedFileNames(this)" multiple/>   
                    </p>
                </div> 
                -->
                
                <h4>Create or Update files</h4>

                <div class="innerBox divCenter2" >
                    <input class="" type="button" value="Create or Update Viewer Directories" onclick="createUpdateViewerDir();" /> 

                    <input type="button" value="Create or Update Tasks" onclick="createUpdateTask();">
                    <input type="button" value="Upload or Update Datasets" onclick="uploadUpdateDataset();">

                    <br/> <br/>
                </div>      
                
                
            </form>
            <form method="GET" action="TaskInstancesCreator"  id="setupForm">
                <hr>
                <h4> Viewer </h4>
              <!--  <div class="innerBox">
                    <div id="viewerConditionsDiv">
                        <div class="conditionNumberOdd">
                            <p> Specify Viewer Name
                                <select id="viewer" name="conditions" class="right" style="min-width:50%;">
                                    <option value="">Select An Uploaded File</option>
                                </select>                           
                        </div>
                        <br />
                    </div>

                </div>  -->
                
                
                
                 <table class="center" id="conditionsTable">
                            <tr>
                                <th></th>
                                <th>Viewer Directory 
                                    <img src="images/refresh-icon.png" title="Refresh Viewer Directories" 
                                         alt="Refresh Viewer Directories" 
                                         onclick="getExistingDirectoryNamesAndHTMLFilenames();" 
                                         class="refreshIconSmall"/>
                                </th>
                                <th>Condition URL</th>
                            </tr>
                            <tr class="conditionNumberOdd" id="conditionRow1">
                                <td id="conditionPosition1"> 1. </td>
                                <td>
                                    <select id="existingViewerDirName1" onchange="viewerDirectoryChanged(this, '1')">
                                    </select>
                                </td>
                                <td>
                                    <p>
                                        <select id="condition1" name="conditions" 
                                                style="min-width:100%;">
                                            <option value="">Select An Uploaded Web-page</option>                                            
                                        </select>   
                                        <br/>
                                    </p>
                                </td>
                            </tr>
                 </table>
                
                
                
                
                
                
                
                
                <hr>

                <h4>Dataset</h4>
                
                <table class="center" id="datasetsTable">
                        <tr>
                            
                            <th>Dataset
                                <img src="images/refresh-icon.png" title="Refresh Datasets" 
                                     alt="Refresh Datasets" onclick="loadDatasets()" class="refreshIconSmall"/>

                            </th>
                            <th>Format</th>                        
                        </tr>
                        <tr class="questionNumberEven" id="datasetRow1">
                           
                            <td>
                                <p>                                   
                                    <select name="dataset" id="dataset1" onchange="datasetChanged(this);">
                                        <option value ="">Select One</option> 
                                    </select>
                                </p>
                            </td>
                            <td>
                                <p>
                                    <select style="min-width: 100px" name="datasetFormat" id="datasetFormat1">
                                    </select>
                                </p>
                            </td>
                           
                        </tr>

                    </table>
                
                
                
                <!-- <div class="innerBox">
                    <p> Select the Dataset                         
                        <select name="dataset" id="dataset" class="right">
                            <option value=""> Select One </option>
                            <option value="imdb_small">IMDB - small</option>
                            <option value="miserables">Les Miserables</option>
                            <option value="miserables_small">Les Miserables (small)</option>
                            <option value="receipe_small">Receipe (small)</option>

                        </select>
                    </p>
                </div>
                -->

                <hr />

                <h4> Quantitative Tasks </h4>
                <div class="innerBox">
                    <div id="quantitativeTasksDiv">
                        <div class="questionNumberOdd" id="qnDiv">
                           
                            <br>                          
                        </div>
                    </div>
                </div>
                <hr />
                <div class="center">
                    <input type="button" value="Next step: Selecting task instances" onclick="startTaskInstances();"/>
                    &nbsp; &nbsp; &nbsp; 

                    <input type="hidden" value="" id="command" name="submitForm" />
                    <input type="hidden" value=""  id="tempname" name="studyname" />
                </div>
            </form>

            <input type="hidden" id="userid" value="user2" />
    
    <!--<input type="hidden" id="userid" value="user2" />
    <input type="hidden" id="userid" value="user4" />
    <input type="hidden" id="userid" value="user5" />
    <input type="hidden" id="userid" value="user1" />  -->
        </div>

    </body>
</html>
